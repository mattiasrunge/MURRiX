<div data-bind="fadeVisible: nodeModel.toolsModel.show">
  <div class="abs-max content" data-bind="if: nodeModel.node() !== false">
    <div class="page-header">
      <h1>Tools <small>Batch tools for working on a large number of items</small></h1>
    </div>

     <ul class="nav nav-tabs" style="margin-bottom: 20px;">
      <li data-bind="css: { active: nodeModel.toolsModel.tool() === 'batch_camera' }">
        <a href="#" data-bind="hrefFirstSecondary: 'batch_camera'">Set Camera</a>
      </li>
    </ul>

    <div style="margin-bottom: 30px;" data-bind="visible: nodeModel.toolsModel.tool() === 'batch_camera'">

      <p>
        Below is a list of items grouped by camera identifiers such as serial number or model name read from the images exif data. If there is a camera found that matches the serial number or name it's name will be listed in the suggestion column. Under actions there is a button to set the suggested camera on all the images with matching exif data. Note that it will overwrite any previously set camera. If no suggested camera can be identified a button to create one based on the exif data is presented.
      </p>

      <table class="table table-condensed table-striped">
        <thead>
          <tr>
            <th>Count</th>
            <th>Type</th>
            <th>Identifier</th>
            <th>Matched&nbsp;Camera</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: nodeModel.toolsModel.cameraIdentifiers">
          <tr>
            <td data-bind="text: $data._itemIds.length"></td>
            <td data-bind="text: $data.type"></td>
            <td data-bind="text: $data.unique"></td>
            <td>
              <span data-bind="if: $data._with !== false">
                <span data-bind="popoverNode: $data._with, textNodeAttribute: [ $data._with, 'name' ]"></span>
              </span>
              <span data-bind="if: $data._with === false">
                <i>No suggestion</i>
              </span>
            </td>
            <td>
              <button class="btn btn-xs btn-primary" data-bind="click: nodeModel.toolsModel.setCamera, visible: $data._with !== false, disable: nodeModel.toolsModel.loading">Set camera</button>
              <button class="btn btn-xs btn-primary" data-bind="click: nodeModel.toolsModel.withCreateFromExif, visible: $data._with === false && $data.type !== 'none', disable: nodeModel.toolsModel.loading">Create camera</button>
            </td>
          </tr>
        </tbody>
      </table>


      <!--<table class="table table-condensed table-striped">
        <thead>
          <tr>
            <th>File</th>
            <th>Exif</th>
            <th>Suggestion</th>
            <th>Current</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: nodeModel.toolsModel.items">
          <tr>
            <td>
              <img data-bind="srcPicture: [ $data.item._id, 250, 250, 1, $data.item.cacheId ], attr: { title: $data.item.name }" src="" alt="" style="width: 80px; height: 80px;">
            </td>
            <td>
              <span data-bind="if: $data.item.exif.Model">
                <span data-bind="text: $data.item.exif.Model"></span>
              </span>
            </td>
            <td>
              <span data-bind="if: $data._with() !== false">
                <span data-bind="popoverNode: $data._with(), textNodeAttribute: [ $data._with(), 'name' ]"></span>
              </span>
              <span data-bind="if: $data._with() === false">
                <i>No suggestion</i>
              </span>
            </td>
            <td>
              <span data-bind="if: $data.item.with() !== false">
                <span data-bind="popoverNode: $data.item.with()._id, text: $data.item.with().name"></span>
              </span>
              <span data-bind="if: $data.item.with() === false">
                <i>No camera set</i>
              </span>
            </td>
          </tr>
        </tbody>
      </table>-->

    </div>

  </div>
  <div class="abs-max background"></div>
</div>
