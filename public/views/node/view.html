<div class="sidebar-nav" data-bind="fadeVisible: nodeModel.show, if: nodeModel.node">
  <div class="sidebar-nav-content">
    <ul class="nav nav-list">
      <li>

          <h5 data-bind="text: nodeModel.node() ? nodeModel.node().name : 'Unknown'"></h5>

          <div style="position: relative; width: 230px; height: 153px; z-index: 100" data-bind="event: { drop: nodeModel.dragDrop, dragover: nodeModel.dragOver }">
            <img class="img-rounded" src="img/230x153_drop-profile-picture.png" style="width: 230px; height: 153px; position: absolute; top: 0px; left: 0px;" data-bind="visible: nodeModel.showDrop() || !nodeModel.node()._profilePicture || !nodeModel.node()._profilePicture()">
          
            <!-- ko if: nodeModel.node()._profilePicture && nodeModel.node()._profilePicture() !== false -->
              <img class="img-rounded" src="" alt="" data-bind="attr: { src: 'preview?id=' + nodeModel.node()._profilePicture() + '&amp;width=230&amp;height=153' }">
            <!-- /ko -->
          </div>
          
      </li>
      
      <li class="nav-header">Actions</li>
      
      <li data-bind="fadeVisible: nodeModel.summaryModel.enabled, css: { 'active': nodeModel.summaryModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'summary'">
          <i class="icon-list-alt"></i> Summary
        </a>
      </li>

      <li data-bind="fadeVisible: nodeModel.timelineModel.enabled, css: { 'active': nodeModel.timelineModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'timeline'">
          <i class="icon-time"></i> Timeline
        </a>
      </li>

      <li data-bind="fadeVisible: nodeModel.picturesModel.enabled, css: { 'active': nodeModel.picturesModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'pictures'">
          <i class="icon-th"></i> Pictures <span data-bind="fadeVisible: nodeModel.fileNodes().length > 0, text: nodeModel.fileNodes().length" class="badge pull-right"></span>
        </a>
      </li>

     <li data-bind="fadeVisible: nodeModel.relationsModel.enabled, css: { 'active': nodeModel.relationsModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'relations'">
          <i class="icon-retweet"></i> Relations
        </a>
      </li>

      <li data-bind="fadeVisible: nodeModel.logbookModel.enabled, css: { 'active': nodeModel.logbookModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'logbook'">
          <i class="icon-book"></i> Logbook <span data-bind="fadeVisible: nodeModel.logbookModel.entries().length > 0, text: nodeModel.logbookModel.entries().length" class="badge pull-right"></span>
        </a>
      </li>

      <li data-bind="fadeVisible: nodeModel.commentsModel.enabled, css: { 'active': nodeModel.commentsModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'comments'">
          <i class="icon-comment"></i> Comments <span data-bind="fadeVisible: nodeModel.node().comments().length > 0, text: nodeModel.node().comments().length" class="badge pull-right"></span>
        </a>
      </li>
      

      <li class="nav-header">Administration</li>

      <li data-bind="fadeVisible: nodeModel.connectionsModel.enabled, css: { 'active': nodeModel.connectionsModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'connections'">
          <i class="icon-retweet"></i> Connections <span data-bind="fadeVisible: nodeModel.connectionsModel.connections().length > 0, text: nodeModel.connectionsModel.connections().length" class="badge pull-right"></span>
        </a>
      </li>

      <li data-bind="fadeVisible: nodeModel.accessesModel.enabled, css: { 'active': nodeModel.accessesModel.show }" class="nav-link">
        <a href="#" data-bind="hrefSecondPrimary: 'accesses'">
          <i class="icon-lock"></i> Accesses <span data-bind="fadeVisible: nodeModel.accessesModel.accesses().length > 0, text: nodeModel.accessesModel.accesses().length" class="badge pull-right"></span>
        </a>
      </li>


      <li class="nav-header">Tags <button rel="tooltip" title="Edit tags" class="btn btn-link btn-mini pull-right" href="#editTagsModal" data-toggle="modal"><span class="icon-pencil"></span></button></li>

      <li data-bind="foreach: nodeModel.node().tags">
        <span class="label label-inverse"><a href="#" data-bind="text: $data, attr: { href: '#search:' + $data }" style="color: white; cursor: pointer; text-decoration: none;"></a></span>
      </li>

      <li>



      </li>
    </ul>
  </div>
  
  <div class="well sidebar-nav-background"></div>
</div>

<div class="modal" id="editTagsModal" tabindex="-1" role="dialog" aria-labelledby="editTagsModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="editTagsModalLabel">Edit tags</h3>
  </div>
  <div class="modal-body">
    <form data-bind="submit: nodeModel.tagSubmit" style="margin: 0px">
      <input placeholder="Tag name" type="text" name="newTag" style="width: 515px;" data-bind="hasfocus: true, disable: nodeModel.tagLoading, value: nodeModel.tagName" data-provide="typeahead"/>
    </form>

    <div data-bind="foreach: nodeModel.node().tags">
      <span class="label label-inverse" style="display: inline-block;">
        <span data-bind="text: $data"></span>&nbsp;&nbsp;
        <a href="#" style="color: red;" data-bind="click: $parent.nodeModel.tagRemove">×</a>
      </span> 
    </div>
  </div>
  <div class="modal-footer">
    <p class="pull-left text-error" data-bind="visible: nodeModel.createErrorText() != '', text: nodeModel.createErrorText"></p>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>

<form class="modal" id="createEventModal" tabindex="-1" role="dialog" aria-labelledby="createEventModalLabel" aria-hidden="true" style="display: none;" data-bind="submit: nodeModel.createSubmit" data-murrix-node-type="event">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="createEventModalLabel">Create event</h3>
  </div>
  <div class="modal-body">
      <input placeholder="Name" type="text" name="createNodeName" style="width: 515px;" data-bind="hasfocus: true, disable: nodeModel.createLoading, value: nodeModel.createName"/>
      <textarea placeholder="Description" name="createNodeDescription" style="width: 515px; height: 200px; margin-bottom: 0px" data-bind="disable: nodeModel.createLoading, value: nodeModel.createDescription"></textarea>
  </div>
  <div class="modal-footer">
    <p class="pull-left text-error" data-bind="visible: nodeModel.createErrorText() != '', text: nodeModel.createErrorText"></p>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <button class="btn btn-primary">Create</button>
  </div>
</form>

<form class="modal" id="createPersonModal" tabindex="-1" role="dialog" aria-labelledby="createPersonModalLabel" aria-hidden="true" style="display: none;" data-bind="submit: nodeModel.createSubmit" data-murrix-node-type="person">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="createPersonModalLabel">Create person</h3>
  </div>
  <div class="modal-body">
      <input placeholder="Name" type="text" name="createNodeName" style="width: 515px;" data-bind="hasfocus: true, disable: nodeModel.createLoading, value: nodeModel.createName"/>
      <textarea placeholder="Description" name="createNodeDescription" style="width: 515px; height: 200px; margin-bottom: 0px" data-bind="disable: nodeModel.createLoading, value: nodeModel.createDescription"></textarea>
  </div>
  <div class="modal-footer">
    <p class="pull-left text-error" data-bind="visible: nodeModel.createErrorText() != '', text: nodeModel.createErrorText"></p>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <button class="btn btn-primary">Create</button>
  </div>
</form>

<form class="modal" id="createLocationModal" tabindex="-1" role="dialog" aria-labelledby="createLocationModalLabel" aria-hidden="true" style="display: none;" data-bind="submit: nodeModel.createSubmit" data-murrix-node-type="location">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="createLocationModalLabel">Create location</h3>
  </div>
  <div class="modal-body">
      <input placeholder="Name" type="text" name="createNodeName" style="width: 515px;" data-bind="hasfocus: true, disable: nodeModel.createLoading, value: nodeModel.createName"/>
      <textarea placeholder="Description" name="createNodeDescription" style="width: 515px; height: 200px; margin-bottom: 0px" data-bind="disable: nodeModel.createLoading, value: nodeModel.createDescription"></textarea>
  </div>
  <div class="modal-footer">
    <p class="pull-left text-error" data-bind="visible: nodeModel.createErrorText() != '', text: nodeModel.createErrorText"></p>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <button class="btn btn-primary">Create</button>
  </div>
</form>

<form class="modal" id="createVehicleModal" tabindex="-1" role="dialog" aria-labelledby="createVehicleModalLabel" aria-hidden="true" style="display: none;" data-bind="submit: nodeModel.createSubmit" data-murrix-node-type="vehicle">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="createLocationModalLabel">Create vehicle</h3>
  </div>
  <div class="modal-body">
      <input placeholder="Name" type="text" name="createNodeName" style="width: 515px;" data-bind="hasfocus: true, disable: nodeModel.createLoading, value: nodeModel.createName"/>
      <textarea placeholder="Description" name="createNodeDescription" style="width: 515px; height: 200px; margin-bottom: 0px" data-bind="disable: nodeModel.createLoading, value: nodeModel.createDescription"></textarea>
  </div>
  <div class="modal-footer">
    <p class="pull-left text-error" data-bind="visible: nodeModel.createErrorText() != '', text: nodeModel.createErrorText"></p>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <button class="btn btn-primary">Create</button>
  </div>
</form>
