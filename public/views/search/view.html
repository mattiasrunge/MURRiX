<div data-bind="fadeVisible: searchModel.show">
  <div class="abs-max content">
    <div class="page-header">
      <h1>Search <small>Search nodes by name or tag name</small></h1>
    </div>

    <form data-bind="submit: searchModel.searchSubmit">

      <div class="input-group">
        <input type="text" class="form-control" data-bind="value: searchModel.queryInput, disable: searchModel.loading">
        <div class="input-group-btn">
          <button type="submit" class="btn btn-primary" tabindex="-1" data-bind="disable: searchModel.loading">Search</button>
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" tabindex="-1" data-bind="disable: searchModel.loading">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu pull-right">
            <li data-bind="css: { active: searchModel.searchTypeAlbum }">
              <a data-bind="click: searchModel.searchTypeAlbumClicked, disable: searchModel.loading"><i style="vertical-align: center;" class="icon-book"></i> Album</a>
            </li>
            <li data-bind="css: { active: searchModel.searchTypePerson }">
              <a data-bind="click: searchModel.searchTypePersonClicked, disable: searchModel.loading"><i style="vertical-align: center;" class="icon-user"></i> Person</a>
            </li>
            <li data-bind="css: { active: searchModel.searchTypeLocation }">
              <a data-bind="click: searchModel.searchTypeLocationClicked, disable: searchModel.loading"><i style="vertical-align: center;" class="icon-flag"></i> Location</a>
            </li>
            <li data-bind="css: { active: searchModel.searchTypeCamera }">
              <a data-bind="click: searchModel.searchTypeCameraClicked, disable: searchModel.loading"><i style="vertical-align: center;" class="icon-camera"></i> Camera</a>
            </li>
            <li data-bind="css: { active: searchModel.searchTypeVehicle }">
              <a data-bind="click: searchModel.searchTypeVehicleClicked, disable: searchModel.loading"><i style="vertical-align: center;" class="icon-truck"></i> Vehicle</a>
            </li>
          </ul>
        </div>
      </div>

    </form>

    <div style="margin-top: 20px;">
      <span data-bind="visible: searchModel.query() !== '' && !searchModel.loading()">
        Found <span data-bind="text: searchModel.count"></span> node(s) matching "<span data-bind="text: searchModel.query"></span>"
      </span>

      <span data-bind="visible: searchModel.loading">
        Searching for <span data-bind="text: searchModel.query"></span>...
      </span>
    </div>

    <div class="alert alert-error" data-bind="visible: searchModel.error() !== '', text: searchModel.error"></div>

    <ul class="pagination" data-bind="visible: searchModel.pages().length > 1" style="margin-bottom: 0px;">

      <li data-bind="if: searchModel.pages().length > 1, css: { disabled: searchModel.page() == 0 }"><a href="#" data-bind="click: searchModel.previousPageClicked">&laquo;</a></li>

      <!-- ko foreach: searchModel.pages -->
        <li data-bind="css: { active: $parent.searchModel.page() == $data }"><a href="#" data-bind="text: $data + 1, click: $parent.searchModel.pageClicked"></a></li>
      <!-- /ko -->

      <li data-bind="if: searchModel.pages().length > 1, css: { disabled: searchModel.page() == searchModel.pages().length - 1 }"><a href="#" data-bind="click: searchModel.nextPageClicked">&raquo;</a></li>

    </ul>

    <div class="clearfix" data-bind="template: { name: 'nodeSearchTemplate', foreach: searchModel.data }" style="margin-top: 50px;"></div>

    <ul class="pagination" data-bind="visible: searchModel.pages().length > 1">

      <li data-bind="if: searchModel.pages().length > 1, css: { disabled: searchModel.page() == 0 }"><a href="#" data-bind="click: searchModel.previousPageClicked">&laquo;</a></li>

      <!-- ko foreach: searchModel.pages -->
        <li data-bind="css: { active: $parent.searchModel.page() == $data }"><a href="#" data-bind="text: $data + 1, click: $parent.searchModel.pageClicked"></a></li>
      <!-- /ko -->

      <li data-bind="if: searchModel.pages().length > 1, css: { disabled: searchModel.page() == searchModel.pages().length - 1 }"><a href="#" data-bind="click: searchModel.nextPageClicked">&raquo;</a></li>

    </ul>

  </div>
  <div class="abs-max background"></div>
</div>
