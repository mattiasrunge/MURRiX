<div class="main-overlay" data-bind="fadeVisible: nodeModel.summaryModel.show, if: nodeModel.node">
  <div class="main-overlay-content">
    <div class="page-header">
      <a class="btn btn-primary pull-right" href="#" data-bind="attr: { 'href' : '#node:' + nodeModel.primaryNodeId() }">Close</a>

      <h1>Summary</h1>
    </div>

    <div class="row-fluid">
      <div class="span6">
        <h2>
          Description
          <span class="btn-group" data-bind="visible: !nodeModel.node().descriptionEditing()">
            <button class="btn btn-mini" data-bind="click: nodeModel.summaryModel.descriptionEditClicked"><i class="icon-pencil"></i></button>
          </span>
          <span class="btn-group" data-bind="visible: nodeModel.node().descriptionEditing()">
            <button class="btn btn-mini btn-success" data-bind="click: nodeModel.summaryModel.descriptionSaveClicked">Save</button>
            <button class="btn btn-mini" data-bind="click: nodeModel.summaryModel.descriptionCancelClicked">Cancel</button>
          </span>
        </h2>
        <p>
           <div data-bind="visible: !nodeModel.node().descriptionEditing(), html: nodeModel.node().description() || '<i>No description found.</i>'"></div>
           <textarea data-bind="visible: nodeModel.node().descriptionEditing(), value: nodeModel.node().description, hasfocus: nodeModel.node().descriptionEditing()" style="width:100%" rows="10"></textarea>
        </p>
      </div>
      <div class="span6">
        <h2>People</h2>
        <p data-bind="visible: nodeModel.summaryModel.people().length == 0">
          <em>No related people found.</em>
        </p>

        <!-- ko foreach: nodeModel.summaryModel.people -->
          <p data-bind="text: $data.name"></p>
        <!-- /ko -->

        <h2>Things</h2>
        <p data-bind="visible: nodeModel.summaryModel.things().length == 0">
          <em>No related things found.</em>
        </p>

        <!-- ko foreach: nodeModel.summaryModel.things -->
          <p data-bind="text: $data.name"></p>
        <!-- /ko -->
      </div>
    </div>
    
    <div class="row-fluid">
      <div class="span6">
        <h2>Attributes</h2>
        <p>
          <table class="table table-striped">
            <tbody>
              <!-- ko foreach: nodeModel.node().attributes -->
              <tr>
                <td data-bind="text: name"></td>
                <td>
                  <div data-bind="visible: !editing(), text: value"></div>
                  <div class="" data-bind="visible: editing()">
                    <textarea class="inlineEdit" type="text" data-bind="value: value, hasfocus: editing()"></textarea>
                  </div>
                </td>
                <td>
                  <div class="btn-group pull-right" data-bind="visible: !editing()">
                    <button class="btn btn-mini" data-bind="click: $parent.nodeModel.summaryModel.attributeEditClicked"><i class="icon-pencil"></i></button>
                    <button class="btn btn-mini" data-bind="click: $parent.nodeModel.summaryModel.attributeRemoveClicked"><i class="icon-remove"></i></button>
                  </div>
                  <div class="btn-group pull-right" data-bind="visible: editing()">
                    <button class="btn btn-success btn-small" data-bind="click: $parent.nodeModel.summaryModel.attributeSaveClicked">Save</button>
                    <button class="btn btn-small" data-bind="click: $parent.nodeModel.summaryModel.attributeCancelClicked">Cancel</button>
                  </div>
                </td>
              </tr>
              <!-- /ko -->
              <tr>
                <td>
                  <input type="text" class="inlineEdit" data-bind="value: nodeModel.summaryModel.newAttributeName" placeholder="Enter name">
                </td>
                <td>
                  <input type="text" class="inlineEdit" data-bind="value: nodeModel.summaryModel.newAttributeValue" placeholder="Enter value">
                </td>
                <td>
                  <button class="btn btn-primary btn-small pull-right" data-bind="click: nodeModel.summaryModel.attributeAddClicked">Add</button>
                </td>
              </tr>
            </tbody>
          </table>
        </p>
      </div>
      <div class="span6">
        <h2>Properties</h2>
        <p>
          <table class="table table-striped">
            <tbody>
              <tr>
                <td>Id</td>
                <td colspan="2" data-bind="text: nodeModel.node().id"></td>
              </tr>
              <tr>
                <td>Name</td>
                <td>
                  <div data-bind="visible: !nodeModel.node().nameEditing(), text: nodeModel.node().name"></div>
                  <div class="" data-bind="visible: nodeModel.node().nameEditing()">
                    <input type="text" data-bind="value: nodeModel.node().name, hasfocus: nodeModel.node().nameEditing()" class="inlineEdit">
                  </div>
                </td>
                <td>
                  <div class="btn-group pull-right" data-bind="visible: !nodeModel.node().nameEditing()">
                    <button class="btn btn-mini" data-bind="click: nodeModel.summaryModel.nameEditClicked"><i class="icon-pencil"></i></button>
                  </div>
                  <div class="btn-group pull-right" data-bind="visible: nodeModel.node().nameEditing()">
                    <button class="btn btn-success btn-small" data-bind="click: nodeModel.summaryModel.nameSaveClicked">Save</button>
                    <button class="btn btn-small" data-bind="click: nodeModel.summaryModel.nameCancelClicked">Cancel</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Type</td>
                <td>
                  <div data-bind="visible: !nodeModel.node().typeEditing(), text: nodeModel.node().type"></div>
                  <div class="" data-bind="visible: nodeModel.node().typeEditing()">
                    <input type="text" data-bind="value: nodeModel.node().type, hasfocus: nodeModel.node().typeEditing()" class="inlineEdit">
                  </div>
                </td>
                <td>
                  <div class="btn-group pull-right" data-bind="visible: !nodeModel.node().typeEditing()">
                    <button class="btn btn-mini" data-bind="click: nodeModel.summaryModel.typeEditClicked"><i class="icon-pencil"></i></button>
                  </div>
                  <div class="btn-group pull-right" data-bind="visible: nodeModel.node().typeEditing()">
                    <button class="btn btn-success btn-small" data-bind="click: nodeModel.summaryModel.typeSaveClicked">Save</button>
                    <button class="btn btn-small" data-bind="click: nodeModel.summaryModel.typeCancelClicked">Cancel</button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Created</td>
                <td colspan="2" data-bind="htmlDate: nodeModel.node().created"></td>
              </tr>
              <tr>
                <td>Modified</td>
                <td colspan="2" data-bind="htmlDate: nodeModel.node().modified"></td>
              </tr>
            </tbody>
          </table>
        </p>
      </div>
    </div>

  </div>
  <div class="well sidebar-nav-background"></div>
</div>
